ParseNat â† { !âˆ§Â´ IsDigit ğ•© â‹„ 10âŠ¸Ã—âŠ¸+ËœÂ´âˆ˜âŒ½ -âŸœ'0' ğ•© }
ParseInt â† {'-'=âŠ‘ğ•©? -ParseNat 1â†“ğ•©; ParseNat ğ•©}
IsDigit â† '0'âŠ¸â‰¤âˆ§â‰¤âŸœ'9'
IsNumeric â† '-'âŠ¸=âˆ¨'0'âŠ¸â‰¤âˆ§â‰¤âŸœ'9'
IdentifyRegions â† Â¯1âŠ¸+ âŠ¢ Ã— +`âˆ˜(0âŠ¸âŒˆ)âˆ˜(-âŸœÂ»)
_CollectRuns â† {IdentifyRegionsâˆ˜ğ”½âŠ¸âŠ”}
CollectNumbers â† {ğ•Šs: ParseIntÂ¨ IsNumeric _CollectRuns s}

pâ€¿v â† ((2âŠ¸â†‘Ë˜)â‹ˆ(2âŠ¸â†“Ë˜)) > CollectNumbersÂ¨â€¢FLinesâŠ‘â€¢args
extent â† 101â€¿103

Simulate â† (extentâŠ¸|Ë˜)âˆ˜(pâŠ¸+)âˆ˜(vâŠ¸Ã—)
Matify â† {1Â¨âŒ¾((<Ë˜ğ•©)âŠ¸âŠ‘) extentâ¥Š0}

â€¢Show Ã—Â´+Â´(â†•4)âŠ¸=Â¨âŠ (Â¬âˆ˜âˆ¨Â´âˆ˜(2âŠ¸â†‘))Â¨âŠ¸/<Ë˜ {ğ•© (=âˆ¾<âˆ¾>) 0.5-Ëœ2Ã·Ëœextent}Ë˜ Simulate 100

# all robots have period 101Ã—103, so global period is 101Ã—103
# find the maximally horizontally symmetric state
â€¢Show t â† âŠ‘â’ { (+Â´Ã·â‰ ) (/â—‹â¥Š)âŸœ(=âŸœâŒ½) Matify ğ•© }Â¨ SimulateÂ¨ â†•Ã—Â´extent

â€¢Show " #"âŠËœ â‰ Matify Simulate t
