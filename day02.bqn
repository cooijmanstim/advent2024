ParseNat â† 10âŠ¸Ã—âŠ¸+ËœÂ´ âˆ˜âŒ½ -âŸœ'0'
IsDigit â† ('0'âŠ¸â‰¤âˆ§â‰¤âŸœ'9')
IdentifyRegions â† {1-Ëœğ•©Ã—+`0âŒˆğ•©-Â»ğ•©}
_CollectRuns â† {ğ•© âŠ”Ëœ IdentifyRegions ğ”½ ğ•©}
Numbers â† {ğ•Šs: ParseNatÂ¨ IsDigit _CollectRuns s}
Diff â† 1âŠ¸â†“-Â¯1âŠ¸â†“ 

lines â† â€¢FLines âŠ‘ â€¢args
IsSafe â† {
  {(âˆ§Â´0=DiffÃ—ğ•©)âˆ§(âˆ§Â´(1âŠ¸â‰¤âˆ§â‰¤âŸœ3)|ğ•©)} Diff ğ•©
}
â€¢Show +Â´ (IsSafeâˆ˜Numbers)Â¨ lines

IsSafe2 â† {ğ•Šx:
  candidates â† (â‹ˆx)âˆ¾ {ğ•Ši: (iâ†‘x)âˆ¾((i+1)â†“x)}Â¨ â†•â‰ x
  âˆ¨Â´ IsSafeÂ¨ candidates
}
â€¢Show +Â´ (IsSafe2âˆ˜Numbers)Â¨ lines

