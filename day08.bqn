map â† >â€¢FLinesâŠ‘â€¢args

xss â† 128â¥Š<âŸ¨âŸ©  # index lists by channel
â†•âˆ˜â‰¢âŠ¸({
  xğ•Š'.': @;
  xğ•Šc: xss ((<x)âŠ¸âˆ¾)âŒ¾((c-@)âŠ¸âŠ‘)â†©
}Â¨) map

Gcd â† {
  !ğ•¨â‰ 0 â‹„ !ğ•©â‰ 0
  ğ•¨{ğ•¨ğ•Š0: ğ•¨;
    ğ•¨ğ•Šğ•©: ğ•¨(âŒŠğ•Š(âŒŠ|âŒˆ))ğ•©}ğ•©
}

Antinodes â† {ğ•Šgenerate:
  nodemap â† 0Â¨map
  {ğ•ŠâŸ¨âŸ©: @;
   ğ•Šxs:
    ys â† (â‰¢Â´Â¨/âŠ¢)â¥Šâ‹ˆâŒœËœ xs  # pairs of distinct antennae
    ys âˆ¾âˆ˜(GenerateÂ´Â¨)â†©  # collect candidates
    ys ((âˆ§Â´âˆ˜(0âŠ¸â‰¤âˆ§<âŸœ(â‰¢nodemap)))Â¨/âŠ¢)â†©  # filter in bounds
    nodemap 1Â¨âŒ¾(ysâŠ¸âŠ‘)â†©
  }Â¨ xss
  nodemap
}

â€¢Show +Â´â¥Š Antinodes âŠ‘âŸ¨{pğ•Šq: pâŠ¸+Â¨ (q-p)âŠ¸Ã—Â¨ Â¯1â€¿2}âŸ©
â€¢Show +Â´â¥Š Antinodes âŠ‘âŸ¨{pğ•Šq:
  dx â† (âˆ§Â´0âŠ¸=)â—¶âŸ¨âŠ¢,Ã·âŸœ(GcdÂ´âˆ˜|)âŸ© q-p
  backâ€¿forth â† âŒˆÂ´Â¨âŒˆ| dxÃ·ËœÂ¨ (p-0)â€¿(p-Ëœâ‰¢map)
  pâŠ¸+âˆ˜(dxâŠ¸Ã—)Â¨ back-Ëœâ†•back+forth
}âŸ©

